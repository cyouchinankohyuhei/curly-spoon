<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä½å®…è¨ºæ–­ã‚«ãƒ«ãƒ†ï¼šé¶´å²¡ç©ºãå®¶ãƒ“ã‚¸ãƒã‚¹ç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { background-color: #F2EFE9; color: #333333; font-family: 'Noto Serif JP', serif; line-height: 1.7; }
        .item-card { border-bottom: 1px solid #D1CDC7; padding: 1rem 0; }
        .advice-box { background-color: #EAE5DD; border-radius: 4px; font-size: 0.7rem; color: #666; margin-top: 0.5rem; padding: 0.6rem; border-left: 2px solid #888; }
        .camera-label { display: inline-flex; align-items: center; background: #333; color: white; padding: 6px 12px; border-radius: 2px; font-size: 10px; cursor: pointer; margin-top: 10px; }
        .preview-img { width: 50px; height: 50px; object-fit: cover; border-radius: 2px; margin-top: 5px; border: 1px solid #ccc; }
        
        /* ã‚«ãƒ«ãƒ†ãƒ»ãƒ“ã‚¸ãƒã‚¹ä»•æ§˜ */
        .karte-border { border: 2px solid #333; padding: 25px; background: #fff; position: relative; }
        .stamp-box { width: 65px; height: 65px; border: 2px solid #c2410c; color: #c2410c; display: flex; align-items: center; justify-content: center; font-size: 10px; border-radius: 50%; transform: rotate(-15deg); font-weight: bold; }
        .red-note { color: #d00; border: 1px solid #d00; padding: 1px 4px; font-size: 9px; transform: rotate(-1deg); display: inline-block; font-weight: bold; margin-left: 5px; }

        input[type="checkbox"] {
            appearance: none; width: 20px; height: 20px; border: 1px solid #888; border-radius: 50%;
            cursor: pointer; position: relative; vertical-align: middle; flex-shrink: 0;
        }
        input[type="checkbox"]:checked { background-color: #888; }
        input[type="checkbox"]:checked::after {
            content: ''; position: absolute; top: 4px; left: 4px; width: 10px; height: 10px; border-radius: 50%; background: #F2EFE9;
        }
    </style>
</head>
<body class="p-6 md:p-12 pb-40">

    <header class="max-w-3xl mx-auto mb-10">
        <div class="flex justify-between items-start">
            <div>
                <h1 class="text-2xl md:text-3xl tracking-widest leading-snug font-bold">ä½å®…è¨ºæ–­ã‚«ãƒ«ãƒ†ä½œæˆ</h1>
                <p class="text-[10px] mt-1 opacity-70">äºŒç´šå»ºç¯‰å£«ãƒ»é›»æ°—å·¥äº‹å£«ãƒ»è¨­å‚™å£«ã«ã‚ˆã‚‹å°‚é–€è¨ºæ–­</p>
            </div>
            <div class="flex flex-col gap-2">
                <button onclick="loadSample()" class="bg-orange-700 text-white text-[10px] px-4 py-2 rounded shadow hover:bg-orange-800 transition font-bold">â˜… ãƒ‡ãƒ¢ç”¨ã‚µãƒ³ãƒ—ãƒ«èª­è¾¼</button>
                <button onclick="location.reload()" class="bg-zinc-200 text-zinc-600 text-[10px] px-4 py-2 rounded">ã‚¯ãƒªã‚¢</button>
            </div>
        </div>
    </header>

    <main class="max-w-3xl mx-auto space-y-16">

        <section>
            <h2 class="text-xl mb-4 border-b border-black pb-2 font-bold text-slate-700">01 å¤–éƒ¨ç’°å¢ƒè¨ºæ–­</h2>
            <div class="grid grid-cols-1 gap-1">
                <div class="item-card flex items-start"><input type="checkbox" id="m1" data-label="é“è·¯å¹…å“¡" data-pro="0" data-diy="0"><label for="m1" class="ml-4 text-sm font-semibold">å‰é¢é“è·¯å¹…å“¡ï¼ˆ4mä»¥ä¸Šãƒ»é™¤é›ªè»Šé€²å…¥ï¼‰</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m2" data-label="é§è»Šå ´æ‹¡å¹…" data-pro="300000" data-diy="50000"><label for="m2" class="ml-4 text-sm font-semibold">é§è»Šå ´ã®æ‹¡å¹…å¯èƒ½æ€§ï¼ˆä¸¦åˆ—é§è»Šï¼‰</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m3" data-label="ç½å®³ãƒªã‚¹ã‚¯" data-pro="0" data-diy="0"><label for="m3" class="ml-4 text-sm font-semibold">ãƒã‚¶ãƒ¼ãƒ‰ãƒãƒƒãƒ—è©²å½“çŠ¶æ³</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m4" data-label="åº­æœ¨ç®¡ç†" data-pro="100000" data-diy="20000"><label for="m4" class="ml-4 text-sm font-semibold">åº­æœ¨ãƒ»å¤–æ§‹ã®ç®¡ç†çŠ¶æ³</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m5" data-label="å¤–å£åŠ£åŒ–" data-pro="800000" data-diy="150000"><label for="m5" class="ml-4 text-sm font-semibold text-red-800">å¤–å£ã®ã²ã³å‰²ã‚Œãƒ»å¡—è£…åŠ£åŒ–</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m6" data-label="å¢ƒç•Œæ­" data-pro="0" data-diy="0"><label for="m6" class="ml-4 text-sm font-semibold">éš£åœ°å¢ƒç•Œæ­ã®ç¢ºèª</label></div>
            </div>
        </section>

        <section>
            <h2 class="text-xl mb-4 border-b border-black pb-2 font-bold text-red-900">02 æ§‹é€ ãƒ»é›¨æ¼ã‚Šè¨ºæ–­</h2>
            <div class="space-y-1">
                <div class="item-card flex flex-col"><div class="flex items-start"><input type="checkbox" id="m7" data-label="é›¨æ¼ã‚Šè·¡" data-pro="500000" data-diy="50000"><label for="m7" class="ml-4 text-sm font-bold text-red-800">é›¨æ¼ã‚Šã®å½¢è·¡ï¼ˆå¤©äº•ãƒ»å°å±‹è£ï¼‰</label></div></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m8" data-label="åŸºç¤ã‚¯ãƒ©ãƒƒã‚¯" data-pro="200000" data-diy="30000"><label for="m8" class="ml-4 text-sm font-semibold">åŸºç¤ã®æ§‹é€ çš„ãªã²ã³å‰²ã‚Œ</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m9" data-label="åºŠæ²ˆã¿" data-pro="300000" data-diy="50000"><label for="m9" class="ml-4 text-sm font-semibold text-red-800 font-bold">åºŠã®ãŸã‚ã¿ãƒ»æ²ˆã¿ï¼ˆåœŸå°è…æœ½ï¼‰</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m10" data-label="æ®‹ç½®ç‰©å¤šé‡" data-pro="300000" data-diy="80000"><label for="m10" class="ml-4 text-sm font-semibold">æ®‹ç½®ç‰©ã«ã‚ˆã‚‹ç‰‡ä»˜ã‘è²»ç”¨</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m11" data-label="å»ºå…·æ­ªã¿" data-pro="150000" data-diy="20000"><label for="m11" class="ml-4 text-sm font-semibold">ã‚µãƒƒã‚·ãƒ»å»ºå…·ã®é–‹é–‰ä¸å…¨</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m12" data-label="åºŠä¸‹ç’°å¢ƒ" data-pro="100000" data-diy="10000"><label for="m12" class="ml-4 text-sm font-semibold text-red-800">åºŠä¸‹ã®æ¹¿æ°—ãƒ»ã‚«ãƒ“ãƒ»è…æœ½è‡­</label></div>
            </div>
        </section>

        <section>
            <h2 class="text-xl mb-4 border-b border-black pb-2 font-bold text-blue-900">03 é›ªå›½é©å¿œæ€§è¨ºæ–­</h2>
            <div class="space-y-1">
                <div class="item-card flex items-start"><input type="checkbox" id="m13" data-label="è½é›ªã‚¹ãƒšãƒ¼ã‚¹" data-pro="200000" data-diy="30000"><label for="m13" class="ml-4 text-sm font-semibold">è½é›ªã‚¹ãƒšãƒ¼ã‚¹ã®æœ‰ç„¡</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m14" data-label="èé›ªç¨¼åƒ" data-pro="150000" data-diy="20000"><label for="m14" class="ml-4 text-sm font-semibold">æ—¢å­˜èé›ªè¨­å‚™ã®å‹•ä½œçŠ¶æ³</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m15" data-label="é›ªå®³ç ´æ" data-pro="100000" data-diy="20000"><label for="m15" class="ml-4 text-sm font-semibold">é›ªè·é‡ã«ã‚ˆã‚‹é›¨æ¨‹ãƒ»è»’å…ˆç ´æ</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m16" data-label="æ°´æŠœãæ “æ•…éšœ" data-pro="50000" data-diy="5000"><label for="m16" class="ml-4 text-sm font-bold text-blue-800">æ°´æŠœãæ “ã®å‹•ä½œï¼ˆå‡çµé˜²æ­¢ï¼‰</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m17" data-label="æ°—å¯†ä¸è¶³" data-pro="150000" data-diy="50000"><label for="m17" class="ml-4 text-sm font-semibold">åŒ—è¥¿é¢¨ã«å¯¾ã™ã‚‹é¢¨é™¤å®¤ãƒ»æ°—å¯†</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m18" data-label="æ›æ°—å£é«˜" data-pro="0" data-diy="10000"><label for="m18" class="ml-4 text-sm font-semibold">ç©é›ªæ™‚ã‚’è€ƒæ…®ã—ãŸæ›æ°—å£é«˜ã•</label></div>
            </div>
        </section>

        <section>
            <h2 class="text-xl mb-4 border-b border-black pb-2 font-bold text-green-900">04 è¨­å‚™ã‚¤ãƒ³ãƒ•ãƒ©è¨ºæ–­</h2>
            <div class="space-y-1">
                <div class="item-card flex items-start"><input type="checkbox" id="m19" data-label="æµ´å®¤æ”¹ä¿®" data-pro="1000000" data-diy="150000"><label for="m19" class="ml-4 text-sm font-semibold">æµ´å®¤ï¼šã‚¿ã‚¤ãƒ«ã‹ã‚‰UBã¸ã®æ›´æ–°</label></div>
                <div class="item-card flex flex-col"><div class="flex items-start"><input type="checkbox" id="m20" data-label="å˜ç›¸3ç·šæ¬ å¦‚" data-pro="120000" data-diy="0"><label for="m20" class="ml-4 text-sm font-bold text-red-800 underline">é›»æ°—ï¼šå˜ç›¸3ç·šå¼ã¸ã®å¼•è¾¼è¦å¦</label></div></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m21" data-label="çµ¦æ¹¯å™¨æ›´æ–°" data-pro="200000" data-diy="30000"><label for="m21" class="ml-4 text-sm font-bold text-red-800">çµ¦æ¹¯å™¨ã®æ›´æ–°ãƒ»ã‚¬ã‚¹ç¨®ç¢ºèª</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m22" data-label="ä¸‹æ°´ãƒ»æµ„åŒ–æ§½" data-pro="300000" data-diy="50000"><label for="m22" class="ml-4 text-sm font-semibold">æ’æ°´ï¼šæµ„åŒ–æ§½ã¾ãŸã¯ä¸‹æ°´æ¥ç¶š</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m23" data-label="åˆ†é›»ç›¤æ›´æ–°" data-pro="60000" data-diy="10000"><label for="m23" class="ml-4 text-sm font-semibold">åˆ†é›»ç›¤ã®è€æœ½åº¦ãƒ»ç©ºãå›è·¯</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m24" data-label="é…ç®¡æ¼æ°´" data-pro="100000" data-diy="10000"><label for="m24" class="ml-4 text-sm font-semibold">çµ¦æ°´ç®¡ã®ã‚µãƒ“ãƒ»æ¼æ°´å…†å€™</label></div>
            </div>
        </section>

        <section class="pb-20">
            <h2 class="text-xl mb-4 border-b border-black pb-2 font-bold text-orange-800">05 è³‡ç”£ä¾¡å€¤ãƒ»ç‰¹è¨˜äº‹é …</h2>
            <div class="space-y-1">
                <div class="item-card flex items-start"><input type="checkbox" id="m25" data-label="è‰¯è³ªå¤æ" data-pro="-200000" data-diy="-50000"><label for="m25" class="ml-4 text-sm font-semibold text-orange-700 font-bold">ä¿å­˜ä¾¡å€¤ã®é«˜ã„å¤æï¼ˆæ¢ãƒ»æŸ±ï¼‰</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m26" data-label="æ„åŒ å»ºå…·" data-pro="0" data-diy="0"><label for="m26" class="ml-4 text-sm font-semibold text-orange-700">ã‚¢ãƒ³ãƒ†ã‚£ãƒ¼ã‚¯å»ºå…·ãƒ»å‹æ¿ã‚¬ãƒ©ã‚¹</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m27" data-label="è”µåœŸé–“" data-pro="0" data-diy="0"><label for="m27" class="ml-4 text-sm font-semibold">è”µãƒ»åœŸé–“ãªã©ã®æ´»ç”¨å¯èƒ½æ€§</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m28" data-label="æ—¥å½“ãŸã‚Š" data-pro="0" data-diy="0"><label for="m28" class="ml-4 text-sm font-semibold text-orange-700">å†¬å ´ã®æ—¥å°„ç†±å–å¾—ã®è‰¯ã•</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m29" data-label="å…‰å›ç·š" data-pro="50000" data-diy="10000"><label for="m29" class="ml-4 text-sm font-semibold">é€šä¿¡ç’°å¢ƒãƒ»å…‰å›ç·šã®å¼•è¾¼çŠ¶æ³</label></div>
                <div class="item-card flex items-start"><input type="checkbox" id="m30" data-label="ãƒãƒªã‚¢ãƒ•ãƒªãƒ¼" data-pro="100000" data-diy="30000"><label for="m30" class="ml-4 text-sm font-semibold">ç”Ÿæ´»å‹•ç·šã®æ”¹ä¿®å®¹æ˜“æ€§</label></div>
                <div class="item-card flex items-start border-none"><input type="checkbox" id="m31" data-label="ä½‡ã¾ã„" data-pro="0" data-diy="0"><label for="m31" class="ml-4 text-sm font-bold italic font-serif">å»ºç‰©ã®å…¨ä½“çš„ãªä½‡ã¾ã„ã¨ç›´æ„Ÿ</label></div>
            </div>
            <label class="camera-label"><span>ğŸ“· å†™çœŸã‚’æ’®å½±ã—ã¦è¨˜éŒ²</span><input type="file" accept="image/*" capture="environment" class="hidden" onchange="preview(this)"></label>
            <div class="flex gap-2 mt-2 preview-container"></div>
        </section>

    </main>

    <div class="fixed bottom-0 left-0 w-full p-8 bg-[#F2EFE9]/95 backdrop-blur-md flex justify-center border-t border-zinc-200 gap-4 no-print">
        <button onclick="calculate()" class="bg-black text-white px-10 py-5 tracking-widest text-xs shadow-2xl font-bold uppercase hover:scale-105 transition">è¨ºæ–­ã‚«ãƒ«ãƒ†ã‚’ç™ºè¡Œã™ã‚‹</button>
    </div>

    <div id="modal" class="hidden fixed inset-0 bg-zinc-900/95 flex items-center justify-center p-4 z-50 overflow-y-auto">
        <div id="pdf-area" class="karte-border max-w-lg w-full shadow-2xl my-auto">
            <div class="flex justify-between items-start border-b-2 border-zinc-800 pb-4 mb-4">
                <div>
                    <h2 class="text-2xl font-bold tracking-tighter">ä½å®…è¨ºæ–­ã‚«ãƒ«ãƒ†</h2>
                    <p class="text-[8px] opacity-70 italic font-sans uppercase">Akiya Audit Case Report</p>
                </div>
                <div class="text-right">
                    <div id="reportDate" class="text-[9px] mb-1"></div>
                    <div class="stamp-box">ä½å®…ã®<br>ä¸»æ²»åŒ»</div>
                </div>
            </div>
            
            <div id="demo-badge" class="hidden text-center mb-4"><span class="bg-orange-100 text-orange-800 text-[10px] px-6 py-1 font-bold rounded-full tracking-widest">â˜… å–¶æ¥­ãƒ‡ãƒ¢ç”¨ã‚µãƒ³ãƒ—ãƒ«</span></div>

            <div class="grid grid-cols-2 gap-4 mb-4 text-[9px] border-b border-zinc-100 pb-4 font-sans uppercase">
                <div><span class="opacity-60">è¨ºæ–­ç‰©ä»¶ï¼š</span>é¶´å²¡å¸‚ï¼ˆã‚µãƒ³ãƒ—ãƒ«ï¼‰</div>
                <div><span class="opacity-60">æ‹…å½“ï¼š</span>å»ºç¯‰å£«ãƒ»è¨­å‚™å£«</div>
            </div>

            <div class="space-y-4 mb-6">
                <div class="p-3 bg-zinc-50 border border-zinc-200">
                    <p class="text-[8px] font-bold mb-1 opacity-50 uppercase tracking-widest">ä¿®ç¹•å‡¦æ–¹ï¼ˆæ¦‚ç®—è¦‹ç©ã‚Šï¼‰</p>
                    <div class="flex justify-between items-baseline mb-1">
                        <span class="text-xs">æ¥­è€…ãƒ•ãƒ«ãƒªãƒãƒ™</span>
                        <span id="proCost" class="text-lg font-bold">Â¥0</span>
                    </div>
                    <div class="flex justify-between items-baseline text-orange-800 font-bold border-t border-zinc-200 pt-1">
                        <span class="text-xs">DIYæœ€é©åŒ–ï¼ˆæŠ‘åˆ¶æ¡ˆï¼‰</span>
                        <span id="diyCost" class="text-xl font-bold">Â¥0</span>
                    </div>
                </div>

                <div id="checked-items-summary" class="text-[9px] leading-relaxed bg-white p-3 border border-dotted border-zinc-300">
                    </div>
            </div>

            <div class="border-t-2 border-zinc-800 pt-4">
                <p class="text-[9px] font-bold mb-2 uppercase tracking-widest text-zinc-400">ä¸»æ²»åŒ»ã®è¨ºæ–­æ‰€è¦‹</p>
                <div id="doctor-note" class="text-[10px] leading-relaxed text-zinc-700 italic bg-yellow-50 p-2 border-l-2 border-yellow-400">
                    </div>
            </div>

            <div class="mt-6 p-3 bg-zinc-800 text-white text-center rounded no-print cursor-pointer hover:bg-zinc-700 transition" onclick="sendLine()">
                <p class="text-[10px] font-bold tracking-widest">è©³ç´°ãªè¦‹ç©ã‚Šãƒ»æ–½å·¥ã®ã”ç›¸è«‡ï¼ˆLINEï¼‰</p>
            </div>

            <div class="flex flex-col gap-3 mt-6 no-print">
                <button onclick="savePDF()" class="bg-zinc-100 text-zinc-800 py-4 text-xs font-bold border border-zinc-300">PDFã¨ã—ã¦ã‚«ãƒ«ãƒ†ã‚’ä¿å­˜</button>
                <button onclick="location.reload()" class="text-[10px] opacity-40 underline text-center">å…¥åŠ›ã‚’ãƒªã‚»ãƒƒãƒˆ</button>
            </div>
        </div>
    </div>

    <script>
        // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿èª­è¾¼
        function loadSample() {
            // ä¸€æ—¦å…¨ã‚¯ãƒªã‚¢
            document.querySelectorAll('input[type="checkbox"]').forEach(c => c.checked = false);

            // ä»£è¡¨çš„ãªé …ç›®ã«ãƒã‚§ãƒƒã‚¯
            const sampleItems = ['m5', 'm7', 'm16', 'm20', 'm25'];
            sampleItems.forEach(id => {
                const el = document.getElementById(id);
                if(el) el.checked = true;
            });

            window.isDemo = true;
            calculate();
        }

        function calculate() {
            let totalPro = 0; let totalDiy = 0;
            let checks = [];
            document.querySelectorAll('input:checked').forEach(c => {
                totalPro += parseInt(c.dataset.pro || 0);
                totalDiy += parseInt(c.dataset.diy || 0);
                checks.push(c.dataset.label);
            });

            document.getElementById('proCost').innerText = "Â¥" + totalPro.toLocaleString();
            document.getElementById('diyCost').innerText = "Â¥" + totalDiy.toLocaleString();
            document.getElementById('reportDate').innerText = "è¨ºæ–­æ—¥ï¼š" + new Date().toLocaleDateString();
            
            const summary = document.getElementById('checked-items-summary');
            const doctorNote = document.getElementById('doctor-note');
            const demoBadge = document.getElementById('demo-badge');

            if(window.isDemo) {
                demoBadge.classList.remove('hidden');
                summary.innerHTML = `<strong>æŒ‡æ‘˜äº‹é …ï¼ˆã‚µãƒ³ãƒ—ãƒ«æŠœç²‹ï¼‰:</strong><br>
                    ãƒ»å¤–å£åŠ£åŒ–ï¼ˆè¦å¡—è£…ï¼‰ <span class="red-note">é›¨æ¨‹ä»˜è¿‘ã«æµ¸é£Ÿã‚ã‚Š</span><br>
                    ãƒ»é›¨æ¼ã‚Šè·¡ <span class="red-note">å°å±‹è£ã®å‚æœ¨ã«è…æœ½ã‚ã‚Š</span><br>
                    ãƒ»æ°´æŠœãæ “å‹•ä½œä¸å…¨ <span class="red-note">è¦ãƒ‘ãƒƒã‚­ãƒ³äº¤æ›</span><br>
                    ãƒ»å˜ç›¸3ç·šæ¬ å¦‚ <span class="red-note">ã‚¨ã‚¢ã‚³ãƒ³è¨­ç½®ã«å¿…é ˆå·¥äº‹</span><br>
                    ãƒ»è‰¯è³ªå¤æ <span class="red-note">ã‚±ãƒ¤ã‚­æ¢ã®æ´»ç”¨ã‚’æ¨å¥¨</span>`;
                doctorNote.innerHTML = "ã€Œå»ºç‰©è‡ªä½“ã¯ç«‹æ´¾ãªé€ ã‚Šã§ã™ãŒã€ãƒ©ã‚¤ãƒ•ãƒ©ã‚¤ãƒ³ã®æ›´æ–°ãŒæ€¥å‹™ã§ã™ã€‚ç‰¹ã«é›»æ°—ç³»çµ±ã¨æ°´æŠœãæ “ã®ä¿®ç†ã‚’è¡Œãˆã°ã€å¿«é©ã«ä½ã¿å§‹ã‚ã‚‰ã‚Œã‚‹ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚å½“æ–¹ã§ã™ã¹ã¦æ–½å·¥å¯èƒ½ã§ã™ã€‚ã€";
            } else {
                demoBadge.classList.add('hidden');
                summary.innerHTML = "<strong>æŒ‡æ‘˜ãƒ»ãƒã‚§ãƒƒã‚¯æ‰€è¦‹:</strong><br>" + (checks.length ? checks.join(' / ') : "ç‰¹ç­†ã™ã¹ãç•°å¸¸ãªã—");
                doctorNote.innerHTML = "ã€Œç¾åœ°èª¿æŸ»ã®çµæœã«åŸºã¥ãè¨ºæ–­ã—ã¾ã—ãŸã€‚èµ¤æ–‡å­—ã®é …ç›®ã¯å„ªå…ˆçš„ãªä¿®ç¹•ã‚’æ¨å¥¨ã—ã¾ã™ã€‚è©³ç´°ãªæ–½å·¥ãƒ—ãƒ©ãƒ³ã«ã¤ã„ã¦ã¯LINEã‚ˆã‚ŠãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚ã€";
            }

            document.getElementById('modal').classList.remove('hidden');
        }

        function savePDF() {
            const btns = document.querySelectorAll('.no-print');
            btns.forEach(b => b.style.display = 'none');
            const element = document.getElementById('pdf-area');
            const opt = {
                margin: 5, filename: 'ä½å®…è¨ºæ–­ã‚«ãƒ«ãƒ†.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };
            html2pdf().set(opt).from(element).save().then(() => {
                btns.forEach(b => b.style.display = 'flex');
                window.isDemo = false;
            });
        }

        function preview(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                const container = input.parentElement.nextElementSibling;
                reader.onload = e => {
                    const img = document.createElement('img');
                    img.src = e.target.result; img.className = 'preview-img';
                    container.appendChild(img);
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function sendLine() {
            alert("LINEã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã—ã¾ã™ã€‚ã‚³ãƒ”ãƒ¼ã—ãŸå†…å®¹ã‚’è²¼ã‚Šä»˜ã‘ã¦é€ä¿¡ã—ã¦ãã ã•ã„ã€‚");
            window.location.href = `https://line.me/R/ti/p/@YOUR_ID`; 
        }
    </script>
</body>
</html>
